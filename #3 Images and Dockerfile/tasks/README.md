# Лабораторная работа: «Сборка образа и связка PHP + MariaDB»

## Цель
Собрать собственный Docker-образ для PHP-приложения, описать `.dockerignore` и поднять инфраструктуру из PHP, MariaDB и phpMyAdmin.

## Ожидаемый результат
- Собран образ `php-app` с помощью пользовательского Dockerfile.
- Настроен `.dockerignore`, чтобы исключить лишние файлы из контекста.
- Связка из PHP-приложения, MariaDB и phpMyAdmin успешно запускается командой `docker compose up`.
- На `http://localhost:8080` отображается сообщение об успешном подключении к базе.
- Через phpMyAdmin можно просматривать базу данных и выполнять запросы.

## Структура задания
1. **Подготовь структуру проекта.**
   - Создай каталоги `php/` и файлы `docker-compose.yml`, `.dockerignore`.
   - Пример структуры есть в `../theory.md`.
2. **Определи `.dockerignore`.**
   - Исключи каталоги `vendor`, `node_modules`, файлы `.env`, логи и прочие артефакты разработки.
3. **Собери PHP-образ.**
   - Напиши `php/Dockerfile` на основе `php:8.2-apache`.
   - Добавь `index.php` с проверкой подключения к MariaDB.
4. **Настрой docker-compose.**
   - Описывай три сервиса: `app`, `db`, `phpmyadmin`.
   - Пробрось порты: `8080:80`, `3306:3306`, `5050:80`.
   - Добавь том для хранения данных MariaDB.
5. **Запусти окружение.**
   - Выполни `docker compose up --build` и дождись старта всех сервисов.
   - Убедись, что сообщение об успешном подключении к БД выводится в браузере.
   - Зайди в phpMyAdmin и посмотри таблицы базы `app_db`.
6. **Задокументируй выводы.**
   - Сохрани команды и наблюдения в файл `lab-notes.md` (расположение на твой выбор).
   - Отрази, как ведёт себя кеш слоёв при изменении `index.php` и при изменении Dockerfile.

## Критерии приёмки
- Все файлы (`docker-compose.yml`, `.dockerignore`, `php/Dockerfile`, `php/index.php`) присутствуют и соответствуют описанию.
- Образ приложения успешно собирается, контейнеры стартуют без ошибок.
- phpMyAdmin подключается к MariaDB по указанным параметрам.
- В отчёте описаны шаги и результаты экспериментов с кешированием слоёв.

## Дополнительно (по желанию)
- Перенеси учётные данные в файл `.env` и подключи его через `env_file`.
- Добавь в PHP-код выборку из тестовой таблицы (создай её заранее через phpMyAdmin или SQL-скрипт).
- Попробуй заменить `phpmyadmin/phpmyadmin` на образ `adminer` и сравни подход к конфигурации.
